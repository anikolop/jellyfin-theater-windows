<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style TargetType="ContentControl" x:Key="ModalIconContent">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Icon}" Value="Warning">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="M29.9314,44.295944L34.223,44.295944 34.223,48.586002 29.9314,48.586002z M29.749001,26.198L34.390999,26.198 34.390999,31.451971 33.290699,42.814522 30.8636,42.814522 29.749001,31.451971z M32,10.338882L8.2226601,54.42371 55.777302,54.42371z M32,0L48,29.665951 64,59.331001 32,59.331001 0,59.331001 16,29.665951z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Error">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="F1M874.094,289.369L854.3,254.63C854.028,254.151 853.515,253.856 852.958,253.856 852.403,253.856 851.89,254.151 851.617,254.63L831.824,289.369C831.555,289.84 831.559,290.416 831.835,290.883 832.111,291.348 832.618,291.634 833.165,291.634L872.752,291.634C873.299,291.634 873.805,291.348 874.081,290.883 874.357,290.416 874.361,289.84 874.094,289.369 M855.653,287.189L850.264,287.189 850.264,282.745 855.653,282.745 855.653,287.189z M855.653,279.41L850.264,279.41 850.264,266.077 855.653,266.077 855.653,279.41z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Exclamation">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="F1M874.094,289.369L854.3,254.63C854.028,254.151 853.515,253.856 852.958,253.856 852.403,253.856 851.89,254.151 851.617,254.63L831.824,289.369C831.555,289.84 831.559,290.416 831.835,290.883 832.111,291.348 832.618,291.634 833.165,291.634L872.752,291.634C873.299,291.634 873.805,291.348 874.081,290.883 874.357,290.416 874.361,289.84 874.094,289.369 M855.653,287.189L850.264,287.189 850.264,282.745 855.653,282.745 855.653,287.189z M855.653,279.41L850.264,279.41 850.264,266.077 855.653,266.077 855.653,279.41z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Asterisk">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="F1M1317.47,730.561L1302.85,720.866 1299.09,737.999 1292.96,721.564 1279.85,733.212 1284.55,716.314 1267.09,718.03 1280.83,707.126 1265.7,698.254 1283.22,697.507 1276.2,681.434 1290.82,691.129 1294.58,673.999 1300.7,690.434 1313.82,678.785 1309.12,695.681 1326.57,693.965 1312.83,704.871 1327.96,713.744 1310.44,714.491 1317.47,730.561z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Information">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="F1M950.458,504.864L940.094,504.864 940.094,503.164 940.925,503.164C941.828,503.164 942.434,503.083 942.748,502.922 943.057,502.758 943.276,502.531 943.404,502.231 943.532,501.935 943.597,501.239 943.597,500.148L943.597,488.226 940.094,488.226 940.094,486.547C941.216,486.414 942.153,486.226 942.917,485.987 943.68,485.747 944.546,485.367 945.518,484.846L946.994,484.846 946.994,501.079C946.994,501.646 947.078,502.071 947.24,502.354 947.401,502.635 947.628,502.843 947.917,502.971 948.206,503.099 948.737,503.164 949.505,503.164L950.458,503.164 M943.576,476.395C944.034,475.944 944.589,475.719 945.234,475.719 945.882,475.719 946.437,475.944 946.896,476.395 947.354,476.848 947.584,477.398 947.584,478.046 947.584,478.692 947.354,479.247 946.896,479.704 946.437,480.164 945.882,480.392 945.234,480.392 944.589,480.392 944.034,480.164 943.576,479.704 943.117,479.247 942.888,478.692 942.888,478.046 942.888,477.398 943.117,476.848 943.576,476.395z M945.276,468.91C933.469,468.91 923.896,478.483 923.896,490.29 923.896,502.099 933.469,511.671 945.276,511.671 957.084,511.671 966.656,502.099 966.656,490.29 966.656,478.483 957.084,468.91 945.276,468.91z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Question">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="F1M1355.27,1727.8L1346.08,1727.8C1346.06,1726.48 1346.05,1725.67 1346.05,1725.38 1346.05,1722.41 1346.54,1719.96 1347.52,1718.04 1348.51,1716.12 1350.47,1713.96 1353.43,1711.56 1356.38,1709.16 1358.14,1707.58 1358.72,1706.84 1359.61,1705.66 1360.05,1704.37 1360.05,1702.95 1360.05,1700.98 1359.27,1699.29 1357.7,1697.89 1356.12,1696.49 1354,1695.78 1351.34,1695.78 1348.77,1695.78 1346.62,1696.52 1344.89,1697.98 1343.16,1699.44 1341.98,1701.68 1341.33,1704.68L1332.04,1703.53C1332.3,1699.23 1334.13,1695.58 1337.53,1692.58 1340.93,1689.58 1345.38,1688.08 1350.91,1688.08 1356.72,1688.08 1361.34,1689.6 1364.77,1692.63 1368.21,1695.67 1369.92,1699.2 1369.92,1703.24 1369.92,1705.47 1369.29,1707.58 1368.03,1709.58 1366.77,1711.57 1364.08,1714.28 1359.95,1717.71 1357.81,1719.49 1356.48,1720.92 1355.97,1722 1355.45,1723.08 1355.22,1725.01 1355.27,1727.8z M1346.08,1741.41L1346.08,1731.29 1356.2,1731.29 1356.2,1741.41 1346.08,1741.41z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Stop">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="M19.85228,12.08996L12.093,19.849201 24.242323,31.997846 12.094,44.145998 19.852051,51.904958 32.001186,39.756277 44.150543,51.904958 51.909,44.145994 39.760246,31.997501 51.909,19.849201 44.15049,12.08996 32.001431,24.238849z M32,0C49.671021,3.1599484E-07 64,14.329407 64,31.998501 64,49.677606 49.671021,63.997003 32,63.997003 14.328003,63.997003 0,49.677606 0,31.998501 0,14.329407 14.328003,3.1599484E-07 32,0z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding Icon}" Value="Hand">
                <Setter Property="Content">
                    <Setter.Value>
                        <Grid>
                            <Grid Width="64" Height="64" />
                            <Path Data="M13.234,53.914001L33.365001,53.914001 33.365001,64 13.234,64z M14.698203,0L14.833696,0C16.932487,0,18.632999,1.7018452,18.632999,3.8007927L18.632999,14.369144 18.925978,14.154766C19.547527,13.743884,20.296827,13.504002,21.103412,13.504002L21.660686,13.504002C23.811683,13.504002,25.555,15.209831,25.555,17.315268L25.555,17.410691 25.761053,17.288155C26.312872,16.994712,26.945265,16.828001,27.617458,16.828001L28.173439,16.828001C30.324262,16.828001,32.069,18.535131,32.069,20.639267L32.069,21.181345 32.106441,21.147317C32.704696,20.65359 33.471691,20.357001 34.307998,20.357 36.219356,20.357001 37.769001,21.906529 37.769001,23.817965L37.769001,23.8247 37.769825,23.832631C37.832641,24.444354,39.792782,44.067476,33.380291,50.212002L13.296177,50.212002C13.296177,50.212002 11.939402,49.85001 10.853424,47.045376 10.853424,47.045376 7.0539768,45.145718 4.7012413,38.450569 4.7012418,38.450569 2.5306335,30.941541 1.1726503,29.494974 1.1726498,29.494974 -1.9926294,24.971675 2.0775431,24.33759 2.0775426,24.33759 6.4607036,23.198274 10.913448,30.23934L10.946688,30.29287 10.918608,30.108762C10.905642,29.981001,10.899,29.85137,10.899,29.720188L10.899,3.8007927C10.899,1.7018452,12.599412,0,14.698203,0z" Stretch="Uniform" Fill="#FFFFFFFF" Width="36" Height="36" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <TransformGroup.Children>
                                            <RotateTransform Angle="0" />
                                            <ScaleTransform ScaleX="1" ScaleY="1" />
                                        </TransformGroup.Children>
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </Setter.Value>
                </Setter>
            </DataTrigger>
            <DataTrigger Binding="{Binding MessageBoxImage}" Value="None">
                <Setter Property="Visibility" Value="Collapsed"></Setter>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <ControlTemplate x:Key="MessageBoxTemplate">
        <Grid>
            <Grid Style="{DynamicResource ModalOverlayStyle}">

            </Grid>
            <Grid Style="{DynamicResource ModalContentStyle}" RenderTransformOrigin="1,0">
                <Grid HorizontalAlignment="Center" MaxWidth="800" Margin="0 25">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                        <RowDefinition Height="auto"></RowDefinition>
                    </Grid.RowDefinitions>

                    <ContentControl Grid.Row="0" Grid.RowSpan="3" Grid.Column="0" VerticalAlignment="Top" Style="{StaticResource ModalIconContent}" Margin="0 2 10 0" KeyboardNavigation.IsTabStop="False"></ContentControl>

                    <TextBlock Text="{Binding Caption}" Grid.Row="0" Grid.Column="1" Margin="0 5 0 10">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource Heading2TextBlockStyle}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Caption}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <Grid x:Name="PnlContent" HorizontalAlignment="Stretch">

                    </Grid>

                    <TextBlock x:Name="Txt" Grid.Row="1" Grid.Column="1" Style="{DynamicResource TextBlockStyle}" Text="{Binding Text}" Margin="0 20 0 20"></TextBlock>

                    <StackPanel x:Name="PnlButtons" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Right" Orientation="Horizontal" Margin="0 20 0 30">

                        <Button x:Name="BtnYes" Content="Yes" Margin="5 0 5 0" Command="{Binding YesCommand}">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}" BasedOn="{StaticResource BaseButtonStyle}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Button}" Value="OK">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Button}" Value="OKCancel">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <Button x:Name="BtnNo" Content="No" Margin="5 0 5 0" Command="{Binding NoCommand}">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}" BasedOn="{StaticResource BaseButtonStyle}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Button}" Value="OK">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Button}" Value="OKCancel">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <Button x:Name="BtnOk" Content="OK" Margin="5 0 5 0" Command="{Binding OKCommand}">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}" BasedOn="{StaticResource BaseButtonStyle}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Button}" Value="YesNo">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Button}" Value="YesNoCancel">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <Button x:Name="BtnCancel" Content="Cancel" Margin="5 0 5 0" Command="{Binding CancelCommand}">
                            <Button.Style>
                                <Style TargetType="{x:Type Button}" BasedOn="{StaticResource BaseButtonStyle}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Button}" Value="OK">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Button}" Value="YesNo">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                    </StackPanel>
                </Grid>
                <!-- Animation -->
                <Grid.Triggers>
                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)">
                                    <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                                    <SplineDoubleKeyFrame KeyTime="0:0:0.15" Value="1"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Grid.Triggers>

                <Grid.RenderTransform>
                    <ScaleTransform ScaleX="1" />
                </Grid.RenderTransform>
            </Grid>
        </Grid>
    </ControlTemplate>

</ResourceDictionary>